<!DOCTYPE html>
<html>
<head>
    <title> tic tac toe </title>


    <style>

        body{
            font-family: Arial;
            text-align: center;
            background-color: #f4f6f8;
        }

        .board{
            display: grid;
            grid-template-columns: repeat(3 , 100px);
            gap: 5px;
            justify-content: center;
            margin-top: 30px;
        }

        .cell{
            width: 100px;
            height: 100px;
            font-size: 36px;
            cursor: pointer;
            background-color: white;
            border: 2px solid black;
        }

        .cell:hover{
            background-color: #e6f2ff;
        }

        h2{
            margin-top: 20px;
        }

    </style>
</head>

<body>

<h2> Tic Tac Toe Simulation </h2>
<p> human (X) vs ai (O) using minimax </p>

<!-- game board -->
<div class="board" id="board"></div>

<h3 id="status"> your turn </h3>

<script>

    
    let box = ["","","","","","","","",""];

    let human = "X";
    let ai = "O";

    let boardDiv = document.getElementById("board");
    let status = document.getElementById("status");

    
    for(let i=0;i<9;i++){
        let cell = document.createElement("button");
        cell.className = "cell";

        cell.onclick = function(){
            humanmove(i);
        };

        boardDiv.appendChild(cell);
    }

    
    function humanmove(pos){

        if(box[pos] != "" || winner(box) != null){
            return;
        }

        box[pos] = human;
        drawboard();

        if(winner(box) == null){
            status.innerHTML = " ai thinking";
            setTimeout(aimove);
        }
    }

    
    function aimove(){

        let bestscore = -1000;
        let bestmove;

        for(let i=0;i<9;i++){
            if(box[i] == ""){
                box[i] = ai;
                let score = minimax(box , false);
                box[i] = "";

                if(score > bestscore){
                    bestscore = score;
                    bestmove = i;
                }
            }
        }

        box[bestmove] = ai;
        drawboard();
        showresult();
    }

    
    function minimax(arr , ismax){

        let res = winner(arr);
        if(res != null){
            if(res == ai) return 10;
            if(res == human) return -10;
            return 0;
        }

        if(ismax){
            let best = -1000;

            for(let i=0;i<9;i++){
                if(arr[i] == ""){
                    arr[i] = ai;
                    best = Math.max(best , minimax(arr , false));
                    arr[i] = "";
                }
            }
            return best;
        }
        else{
            let best = 1000;

            for(let i=0;i<9;i++){
                if(arr[i] == ""){
                    arr[i] = human;
                    best = Math.min(best , minimax(arr , true));
                    arr[i] = "";
                }
            }
            return best;
        }
    }

    
    function winner(arr){

        let win = [
            [0,1,2],[3,4,5],[6,7,8],
            [0,3,6],[1,4,7],[2,5,8],
            [0,4,8],[2,4,6]
        ];

        for(let i=0;i<win.length;i++){
            let a = win[i][0];
            let b = win[i][1];
            let c = win[i][2];

            if(arr[a] != "" && arr[a] == arr[b] && arr[b] == arr[c]){
                return arr[a];
            }
        }

        if(!arr.includes("")){
            return "draw";
        }

        return null;
    }

    function showresult(){

        let res = winner(box);

        if(res != null){
            if(res == "draw"){
                status.innerHTML = " match draw ";
            }
            else{
                status.innerHTML = res + " wins ";
            }
        }
        else{
            status.innerHTML = " your turn ";
        }
    }

    
    function drawboard(){

        let cells = document.getElementsByClassName("cell");

        for(let i=0;i<9;i++){
            cells[i].innerHTML = box[i];
        }
    }

</script>

</body>
</html>
